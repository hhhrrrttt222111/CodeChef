#include <bits/stdc++.h>
using namespace std;
#define int long long int
#define mp make_pair
#define pb push_back
#define F first
#define S second
const int N=400005;
#define M 1000000007
#define double long double
#define BINF 1000000000000001
#define init(arr,val) memset(arr,val,sizeof(arr))
#define MAXN 15000001
const int LG = 22;


#undef int 
int main() { 
#define int long long int 
 
ios_base::sync_with_stdio(false); 
cin.tie(0); 
cout.tie(0); 

	int T;
	cin >> T;
	while(T--){

		int a,k,m,x;
		cin >> a >> k >> m >> x;
		vector<int>v,d;

		if(k == 1){
			if( a == m ) cout << "yes\n";
			else cout << "no\n";
			continue;
		}
		if(m % k > 1){
			cout << "no\n";
			continue;
		}
		if(k == 2){
			bitset<64>bit;
			bit |= m;

			int arr[64];
			init(arr,0);
			for(int i = 0; i < 64; i++){
				if(bit[i]) arr[i] = 1;
			}
			
			for(int i = 2; i < 64; i++){
				if(arr[i] == 1){
					for(int j = i - 1 ; j > 0; j--){
						if(arr[j] != 0) break;

						arr[j + 1] -= 1;
						arr[j] = 2;
					}
				}
			}

			int tot = 0;
			for(int i = 0; i < 64; i++) tot += arr[i];

			if(tot >= a and bit.count() <= a) cout << "yes\n";
			else cout << "no\n";

			continue;
		}
		int tot = 0, f = 0;

		while(m){
			int res = m % k;
			if(res > 2){
				f = 1;
				break;
			}
			tot += res;
			m -= res;
			m /= k;
		}

		if(tot == a){
			cout << "yes\n";
			continue;
		}
		cout << "no\n";
	
	}

return 0;
}
